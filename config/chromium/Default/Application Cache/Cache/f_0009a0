function rHf(a,b){return new rl(function(c,d){fn(Ci(Di(Bi(gn(Ai(a.C.kf("/answers/tablemetadata"),"did",b),"POST"),2),function(e){e=(new ti).Uc(mK.Aa(),e.Xe());c(e)}),function(){var e=new mK;d(e)})).Ze()})}
function sHf(a,b,c){var d=new ti;d.Hi=!0;var e=d.serialize(b);return new rl(function(f,h){Tk(c,function(){HK(a,"/dbx/refreshObject",a.D?["esid",a.D]:[],e,function(k){d.Hi=!1;k=d.Uc(BK.Aa(),k.Xe());k.El().Cq()&&19!=k.El().getErrorCode()?h(k):f(k)},function(){var k=new BK,l=new Uf;l.Tb(3);bka(l);I(k,1,l);h(k)})})})}function tHf(a){a.O&&a.O.jd(a.Na(),a.L?5:1,new Mj(0,a.L?50:0,12,a.L?0:50))}function uHf(a,b,c,d,e,f){UM.call(this,a,b,c,d,e,f);this.C=new hec(f);this.Ia(this.C,!0)}x(uHf,UM);
uHf.prototype.Ca=function(){var a=this.qa().Ca("DIV","waffle-dbsource-container");this.Bb(a)};function vHf(a){var b=null;lP(a.J).some(function(c){c=c.hf();c instanceof rM&&null!=c.C&&(c=c.getId(),b=ritz_api.RitzModelApi.getExternalDataIdForObject(c));return!!b});return b}function wHf(a){var b=a.L.C.C;if(TF(b))return ritz_api.RitzModelApi.getExternalDataIdForDatasourceSheet(b.Cb());if((b=Gxc(a))||(b=vHf(a)))return b;b=rI(a.Ra());return Hxc(a,b)}
function xHf(a){a.eb||(a.eb=new uHf(a.Ra(),a.O,a.C,a.D,new YM(Cxc(a),new Ij(0,0)),a.cb),yP(a.V,"default",a.eb,!0),a.va(a.eb));a.eb.setVisible(!0);return a.eb}function yHf(a){var b=null;a.J.C.forEach(function(c){ritz_api.RitzModelApi.getExternalDataIdForObject(c)&&mP(a.J,c).H.C.find(function(d){d instanceof GX&&(b=d.C);return!!b})});return b}function zHf(a,b){return{title:a,body:b}}function AHf(a){return zHf("Fehler",a)}
function BHf(a,b){var c=b.getErrorCode();b=H(b,3);switch(c){case 20:return AHf(gxe(3,b));case 6:return a=(new wy("{objectType,select, chart{Es hat zu lange gedauert, bis die Datenquelle dieses Diagramm zur\u00fcckgegeben hat. Bitte versuchen Sie es noch einmal.}pivot_table{Es hat zu lange gedauert, bis die Datenquelle diese Pivot-Tabelle zur\u00fcckgegeben hat. Bitte versuchen Sie es noch einmal.}formula{Es hat zu lange gedauert, bis die Datenquelle diese Formel zur\u00fcckgegeben hat. Bitte versuchen Sie es noch einmal.}record{Es hat zu lange gedauert, bis die Datenquelle diese Tabelle zur\u00fcckgegeben hat. Bitte versuchen Sie es noch einmal.}datasource_preview{Es hat zu lange gedauert, bis die Datenquelle diese Vorschau zur\u00fcckgegeben hat. Bitte versuchen Sie es noch einmal.}other{Es hat zu lange gedauert, bis die Datenquelle Daten zur\u00fcckgegeben hat. Bitte versuchen Sie es noch einmal.}}")).format({objectType:a?
pxe[a]||"other":"other"}),zHf("Zeit\u00fcberschreitung",hxe(a,b));case 8:return qxe.format(C(B(),"fembqrfdpt")?1E5:1E4),a=(new wy("{objectType,select, chart{Die Ergebnisse \u00fcbersteigen {MAX_ROWS}\u00a0Zeilen. Aktualisieren Sie dieses Diagramm und versuchen Sie es erneut.}pivot_table{Die Ergebnisse \u00fcbersteigen {DB_PIVOT_TABLE_MAX_ROWS}\u00a0Zeilen. Aktualisieren Sie diese Pivot-Tabelle und versuchen Sie es erneut.}formula{Die Ergebnisse \u00fcbersteigen {MAX_ROWS}\u00a0Zeilen. Aktualisieren Sie diese Funktion und versuchen Sie es erneut.}record{Die Ergebnisse \u00fcbersteigen {MAX_ROWS}\u00a0Zeilen. Aktualisieren Sie diese Tabelle und versuchen Sie es erneut.}datasource_preview{Die Ergebnisse \u00fcbersteigen {MAX_ROWS}\u00a0Zeilen. Aktualisieren Sie dieses verbundene Tabellenblatt und versuchen Sie es erneut.}other{Die Ergebnisse \u00fcbersteigen {MAX_ROWS}\u00a0Zeilen. Aktualisieren Sie diese Abfrage und versuchen Sie es erneut.}}")).format({objectType:a?
pxe[a]||"other":"other"}),zHf("Zu viele Zeilen",hxe(a,b));case 18:return zHf("Nicht unterst\u00fctzter Typ",cZ("Die Abfrage gibt einen ARRAY- oder STRUCT-Datentyp zur\u00fcck. Diese Datentypen werden derzeit nicht unterst\u00fctzt."));case 19:return AHf(kxe());case 22:return AHf(lxe());case 26:return AHf(cZ("Der Spaltentyp der verbundenen Daten ist nicht mit dem Vorgang kompatibel."))}return AHf(mxe(b))}
function CHf(){var a='<div class="'+V("waffle-bigquerydbsourcesettingsdialog-project-section")+'"><h3 class="'+V("waffle-bigquerydbsourcesettingsdialog-project-header")+'">';a=a+"Cloud-Projekt ausw\u00e4hlen"+('</h3><div class="'+V("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper")+'"></div></div>');return U(a)}
function DHf(){var a='<div class="'+V("waffle-bigquerydbsourcesettingsdialog-footer-wrapper")+'"><p class="'+V("waffle-bigquerydbsourcesettingsdialog-footer-message")+'">';return U(a+'Die Nutzung von BigQuery unterliegt den <a href="https://cloud.google.com/terms/" target="_blank">Nutzungsbedingungen</a> der Google Cloud Platform.</p></div>')};function EHf(a,b){jZ.call(this,"waffle-bigquerydbsourcesettingsdialog",b);this.setTitle(this.qa().Ca("SPAN",void 0,"Datenverbindung hinzuf\u00fcgen"));this.F=a;this.D=new bye(void 0,this.qa());this.Ia(this.D);this.J=new zS("Verbinden",this.qa());this.Ia(this.J)}x(EHf,jZ);
EHf.prototype.Ca=function(){jZ.prototype.Ca.call(this);yw(this.Kb(),CHf);cxe(this).appendChild(Aw(DHf));this.J.render(this.Ha("waffle-bigquerydbsourcesettingsdialog-footer-wrapper"));this.D.render(this.rb("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"));(this.D.Dl||null).setAttribute("placeholder","Projekte suchen");this.qa().jk(this.D.Na(),!1)};
EHf.prototype.Ja=function(){jZ.prototype.Ja.call(this);if(0==this.F.length){var a=this.qa();var b=new Rz;var c="Konfigurieren Sie ein Projekt in der Google Cloud Platform Console, um fortzufahren. "+(b.qd("a",{"class":"goog-inline-block",href:"https://support.google.com/docs/answer/9077536",target:"_blank"})+("Weitere Informationen"+b.kd("a")));b=b.format(c);b=et(a,b);Q(this.Ha("waffle-bigquerydbsourcesettingsdialog-project-menu-wrapper"),!1);a.appendChild(this.Ha("waffle-bigquerydbsourcesettingsdialog-project-section"),
a.Ca("DIV","waffle-bigquerydbsourcesettingsdialog-error-caption",b))}else a=FHf(this.F),cye(this.D,a),this.D.Ha("goog-menu-content").style.opacity=1,this.getHandler().listen(this.D,"action",this.L);this.J.Pa(!1)};function FHf(a){return Bc(a,function(b){return new Uxe(b.getId(),b.getName())})}EHf.prototype.L=function(a){var b=this,c=a.target.Ra().ai();Wu(this.Na(),"waffle-bigquerydbsourcesettingsdialog-transition-out");this.D.B_("translateX(-24px)").then(function(){return b.resolve(new Sxe(b.F,c,"db-source-table"))})};function GHf(a,b,c,d,e){FY.call(this,a,b,c,d,e);this.F=""}x(GHf,FY);GHf.prototype.JG=function(){return oJ(this.J.C)&&C(B(),"feda")?FY.prototype.JG.call(this):!1};GHf.prototype.TNa=function(a){jse(a,null,this.F,this.H)};GHf.prototype.A5=function(){this.F?HHf(this):this.GC();kse(null,this.F,this.H)};
function HHf(a){a.JG()&&rHf(GK.getInstance(),a.F).then(function(b){for(var c=[],d=ha(Ge(b,1)),e=d.next();!e.done;e=d.next())c.push(e.value.getName());d=[];e=ha(Ge(b,2));for(var f=e.next();!f.done;f=e.next())d.push(f.value.getName());e=[];b=ha(Ge(b,3));for(f=b.next();!f.done;f=b.next())e.push(f.value.getValue());ove(a,c,d,e,[])},function(){a.GC()})}GHf.prototype.GC=function(){FY.prototype.GC.call(this);this.F="";kse(null,null,this.H)};function IHf(a){var b=a.label;a=a.Fn;return U((a?'<div class="'+V("goog-menuitem-icon")+" "+V("waffle-charteditor-column-filtered-menu-item-icon")+" "+V(a)+'"></div>':"")+'<span class="'+V("waffle-datasource-configbar-columns-menu-item-label")+'">'+S(b)+"</span>")}function JHf(){return U('<div class="'+V("waffle-datasource-configbar-columns-menu-spinner-container")+'"></div>')};function KHf(a){Mv.call(this,a);this.re=new DT(!1);this.va(this.re);this.C=new Cv(Aw(JHf),void 0,this.qa());this.C.ef(8,!1);this.Ia(this.C)}x(KHf,Mv);KHf.prototype.Ja=function(){Mv.prototype.Ja.call(this);Wu(this.Na(),"waffle-datasource-configbar-columns-menu")};KHf.prototype.Ca=function(){Mv.prototype.Ca.call(this);this.C.render(this.Na());this.re.render(this.C.Ha("waffle-datasource-configbar-columns-menu-spinner-container"))};
KHf.prototype.D=function(a){a=ha(a);for(var b=a.next();!b.done;b=a.next()){var c=b.value;b=c.getName();c=Lwe(c.getType());this.Ia(new Cv(Aw(IHf,{label:b,Fn:c}),void 0,this.qa()),!0)}};function LHf(a,b){var c=a.C.getElement();c&&($u(c,"waffle-datasource-configbar-columns-menu-loading",b),Q(c,b),a.re.setActive(b))};function MHf(a){Mv.apply(this,arguments)}x(MHf,Mv);MHf.prototype.Ja=function(){Mv.prototype.Ja.call(this);Wu(this.Na(),"waffle-datasource-configbar-formula-menu")};MHf.prototype.qH=function(a){var b=this;this.Ia(a,!0);this.getHandler().listen(a,"action",function(){var c=new fG("insert-formula-function");c.Ka=a.getValue();b.dispatchEvent(c)})};function NHf(a,b,c){b=c||b;a='<div class="'+V("waffle-dbsource-configbar-wrapper")+'"><div class="'+V("waffle-dbsource-configbar")+'"><div class="'+V("waffle-dbsource-configbar-header")+'">'+S(Yy({xn:"waffle-dbsource-configbar-header-icon",icon:"docs-icon-img docs-icon-datasheet-24-grey800"},b))+'<div class="waffle-dbsource-configbar-header-title"></div><div class="waffle-dbsource-configbar-header-subtitle"></div><div class="'+V("waffle-dbsource-configbar-options-wrapper")+'"><div class="'+V("waffle-dbsource-configbar-send-feedback")+
'">';a=a+"Feedback geben"+('</div><div class="'+V("waffle-dbsource-configbar-configure-datasource-button-wrapper")+'"></div></div></div><div class="'+V("waffle-dbsource-configbar-actions")+'"><div class="'+V("waffle-dbsource-configbar-columns-menu-button-wrapper")+'"></div><div class="'+V("waffle-dbsource-configbar-button-wrapper")+" "+V("waffle-dbsource-configbar-chart-button-wrapper")+'"></div><div class="'+V("waffle-dbsource-configbar-button-wrapper")+" "+V("waffle-dbsource-configbar-pivot-button-wrapper")+
'"></div><div class="'+V("waffle-dbsource-configbar-button-wrapper")+" "+V("waffle-dbsource-configbar-table-button-wrapper")+'"></div><div class="'+V("waffle-dbsource-configbar-button-wrapper")+" "+V("waffle-dbsource-configbar-function-button-wrapper")+'"></div><div class="'+V("waffle-dbsource-configbar-answers-wrapper")+'"></div></div></div></div>');return U(a)}
function OHf(){var a=U('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><g fill="#188038" fill-rule="nonzero"><path d="M14.5263158 2C15.3368421 2 16 2.7 16 3.55555556V14.4444444C16 15.3 15.3368421 16 14.5263158 16H3.47368421C2.66315789 16 2 15.3 2 14.4444444V3.55555556C2 2.7 2.66315789 2 3.47368421 2H14.5263158zM3.5 3.5v11h11v-11h-11z"/><path d="M6.75 12.75h-1.5V7.5h1.5zM9.75 12.75h-1.5v-7.5h1.5zM12.75 12.75h-1.5v-3h1.5z"/></g></svg>');a=S(a)+"<span>";return U(a+
"Diagramm</span>")}function PHf(){var a=U('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" fill-rule="evenodd" d="M10 13h1.185c.9975 0 1.815-.81 1.815-1.815V10h-2.25l3-3 3 3H14.5v1.185c0 1.83-1.485 3.315-3.315 3.315H10v2.25l-3-3 3-3V13zM8 6V2h6.5454545C15.3454545 2 16 2.72 16 3.6V6H8zM2 6V3.6C2 2.72 2.72 2 3.6 2H6v4H2zm1.6 10c-.88 0-1.6-.6545455-1.6-1.4545455V8h4v8H3.6z"/></svg>');a=S(a)+"<span>";return U(a+"Pivot-Tabelle</span>")}
function QHf(){var a=S(pye())+"<span>";return U(a+"Tabelle</span>")}function RHf(){var a=U('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path fill="#188038" d="M15 2H3v1.75L8.143 9 3 14.25V16h12v-2.625H7.286L11.571 9 7.286 4.625H15z"/></svg>');a=S(a)+"<span>";return U(a+"Funktion</span>")};function SHf(a,b,c,d,e){R.call(this,e);this.O=a;this.ma=b;this.Ka=c;this.Oa=d;this.xa=b.Fa;this.Da=new ti;this.C=new dN("Spalten",new KHf(this.qa()),void 0,this.qa());this.C.bd("waffle-dbsource-configbar-columns-menu-button");this.C.ck(!0);this.Ia(this.C);this.J=THf(this,"waffle-dbsource-configbar-chart-button",Aw(OHf));this.R=THf(this,"waffle-dbsource-configbar-pivot-button",Aw(PHf));this.V=THf(this,"waffle-dbsource-configbar-table-button",Aw(QHf));a=Aw(RHf);this.F=new Wv(a,new MHf(this.qa()),v$c.getInstance(),
this.qa());this.F.bd("waffle-dbsource-configbar-function-button");this.F.ck(!0);this.Ia(this.F);this.H=new bN(Aw(Yy,{icon:"docs-icon-img docs-icon-settings"}),this.qa());this.H.bd("waffle-dbsource-configbar-configure-datasource-button");this.Ia(this.H);this.Fa=[this.C,this.J,this.R,this.V,this.F];this.D=null;C(B(),"feda")&&(this.D=new GHf(this.ma,this.Ka,this.Oa,75,this.qa()),this.Ia(this.D));this.L=new yv("",OM.getInstance(),e);this.Ia(this.L)}x(SHf,R);p=SHf.prototype;p.Ca=function(){this.Bb(Aw(NHf))};
p.Ja=function(){R.prototype.Ja.call(this);this.C.render(this.Ha("waffle-dbsource-configbar-columns-menu-button-wrapper"));this.J.render(this.Ha("waffle-dbsource-configbar-chart-button-wrapper"));this.R.render(this.Ha("waffle-dbsource-configbar-pivot-button-wrapper"));this.V.render(this.Ha("waffle-dbsource-configbar-table-button-wrapper"));this.F.render(this.Ha("waffle-dbsource-configbar-function-button-wrapper"));this.H.render(this.Ha("waffle-dbsource-configbar-configure-datasource-button-wrapper"));
this.L.Xa(this.Ha("waffle-dbsource-configbar-send-feedback"));this.L.setVisible(!0);var a=this.H.Na();bw(a,"Abfrage konfigurieren",void 0);t1d(a,"waffle-dbsource-configbar-configure-datasource-button-tooltip");this.D&&this.D.Xa(this.Ha("waffle-dbsource-configbar-answers-wrapper"));this.getHandler().listen(this.J,"action",this.Upb).listen(this.R,"action",this.LCb).listen(this.V,"action",this.xIb).Nc(this.F,"show",this.Dsb).listen(this.C,"show",this.crb).listen(this.H,"action",this.vrb).listen(this.O,
"fa",this.mUb).listen(this.L,"action",this.lUb);UHf(this.R,"fedp");UHf(this.V,"fedr");UHf(this.F,"fedf");UHf(this.J,"fedbc");UHf(this.C,"fedsccm");this.refresh()};p.setVisible=function(a){Q(this.Na(),a);this.D&&!a&&(a=this.D,""!=a.F&&(a.F="",a.A5()))};p.isVisible=function(){return pu(this.Na())};
p.refresh=function(){VHf(this,mQ(this.O).qe());var a;a=(a=ritz_api.RitzModelApi.getExternalDataIdForDatasourceSheet(mQ(this.O).Cb()))?(a=ritz_api.RitzModelApi.getDbObjectResultMetadata(a))?this.Da.Uc(wla.Aa(),a):null:null;var b=WHf(this),c=null!=b&&Ce(b,3)&&Ce(H(b,3),4)&&1==H(H(b,3),4).getType(),d=null!=a&&Ce(a,1);b="";c&&d&&(a=parseInt(H(a,1),10),b=rye.format(a)+"\u00a0Zeilen");a=this.Ha("waffle-dbsource-configbar-header-subtitle");this.qa().Ge(a,b);(a=this.ma.Fh())||(a=this.xa,b=R4(this),a.C.has(b)?
(a=a.C.get(b),a=Ce(a,1)&&!a.gm()):a=!1);XHf(this,!a);this.C.Jd(!1);YHf(this);a=WHf(this);b=C(B(),"fectd");a=null!=a&&Ce(a,3)&&(H(a,3).En()||b);this.H.Pa(a);$u(this.H.getElement(),"waffle-dbsource-configbar-hide-icon",!a);this.D&&(a=this.D,b=R4(this),a.F!=b&&(a.F=b,a.A5()))};function THf(a,b,c){c=new BS(c,a.qa());c.bd(b);a.Ia(c);return c}p.Upb=function(){NVb(null,void 0,R4(this))};p.LCb=function(){var a=new Ff,b=R4(this);I(a,1,b);b=fse();I(b,15,a);a=gse(b);a=new aU(null,gRb(a),void 0);IVb(a)};
p.xIb=function(){QVb(R4(this))};p.Dsb=function(){var a=this.F.Yb(),b=w5d(new v5d(this.ma.Za,a),void 0,!0);b=ha(b);for(var c=b.next();!c.done;c=b.next())a.qH(c.value)};p.vrb=function(){mjb.Hb(R4(this))};p.crb=function(){var a=this,b=this.C.Yb();LHf(b,!0);SK(this.xa,R4(this)).then(function(c){YHf(a);b.D(c)},function(){YHf(a);a.C.Jd(!1);a.refresh()})};p.mUb=function(a){VHf(this,a.vn)};p.lUb=function(){(rs(),or).Hb({source:"big-sheets-feedback"})};
function VHf(a,b){var c=a.Ha("waffle-dbsource-configbar-header-title");a.qa().Ge(c,b)}function UHf(a,b){C(B(),b)||(a.Pa(!1),a.setVisible(!1))}function XHf(a,b){yc(a.Fa,function(c){c.Pa(b);bw(c.Na(),b?"":"Sie haben weder die erforderliche Berechtigung noch den Zugriff, um Analysen mit diesen verbundenen Daten zu aktualisieren oder zu bearbeiten.",void 0)});a.D&&a.D.Pa(b)}function R4(a){return mQ(a.O).ol()}function YHf(a){a=a.C.Yb();for(LHf(a,!1);1<a.Qc();)a.Qm(1,!0)}
function WHf(a){var b=R4(a);return(b=ritz_api.RitzModelApi.getDatasourceSlotDeltaProto(b))?a.Da.Uc(Rn.Aa(),b):null};function ZHf(a,b,c,d,e,f,h){nl.call(this);this.D=a;this.F=b;this.O=c;this.R=d;this.L=e;this.H=f;this.J=h;this.Ma=new Dl(this);this.va(this.Ma);this.C=null;this.Ma.listen(this.D,"Z",this.oSa).listen(this.D,"$",this.kUb).listen(this.F,"offline_status",this.hBb);this.oSa()}x(ZHf,nl);p=ZHf.prototype;
p.oSa=function(){var a=mQ(this.D);a&&TF(a)&&(this.C?this.C.refresh():(this.C=new SHf(this.D,this.F,this.O,this.R),a=this.C.qa(),this.C.render(a.getElement("waffle-dbsource-configbar-id")),this.C.Ud(this),this.Ma.listen(this.C,"insert-formula-function",this.iHb)),this.C.setVisible(!0),g3d())};p.iHb=function(a){var b=this,c=mQ(this.D).qe(),d=a.Ka;tqe(this.L,function(e,f){e=ritz_api.RitzModelApi.getDatasourceReferenceString(c,null);$Hf(b,d,e,f)},"Formel einf\u00fcgen")};
function $Hf(a,b,c,d){d?G0d(mJ(a.H),b,c):(d=new YZd(3,LK(a.F.C)+1),fJ(d,function(e){e&&G0d(mJ(a.H),b,c)}),a.J.C(d))}p.kUb=function(){this.C&&this.C.setVisible(!1)};p.hBb=function(){var a=mQ(this.D);a&&TF(a)&&this.C&&this.C.refresh()};p.La=function(){nl.prototype.La.call(this);F(this.C)};function aIf(a,b,c,d){E.call(this);var e=this;this.Ma=new Dl(this);this.va(this.Ma);this.L=a;this.H=a.Va;this.F=b;this.C=c;this.D=null;bIf(this,d);this.J=new Qk;this.va(this.J);Uk(this.J,this.H.D,function(f){var h=cIf(e);h&&(f.D||f.C.has(h))&&e.uda()})}x(aIf,E);
function bIf(a,b){var c=dG(a.L.C);a.Ma.listen(b,"J",a.pUb).listen(c,"yb",a.oUb).listen(c,["hb","ub"],a.uda).listen(a.F,"Z",a.uda).listen(a.C,"focusEmbeddedObject",a.Mvb).listen(a.C,["activeCellChange","valueChange","blurEmbeddedObject"],a.uda).listen(a.C,"mouseover",a.nUb).listen(a.C,"refresh-db-object-request",a.pSa).listen(a.F,"$",a.pEa)}p=aIf.prototype;p.La=function(){this.pEa();E.prototype.La.call(this)};p.oUb=function(){var a=mJ(this.C);a&&nJ(this.C)&&aQ(a)};
p.pEa=function(){F(dIf(this));F(eIf(this));F(this.D);this.D=null};p.pUb=function(){this.D&&tHf(this.D)};p.uda=function(){mQ(this.F)&&fIf(this)};
function fIf(a){var b=cIf(a);if(b){gIf(a);var c;if(c=cIf(a))if(c=ritz_api.RitzModelApi.getDbObjectTypeForExternalDataSourceId(c),4==c)if(3!=mQ(a.F).getSheetType())c=null;else{if(!a.D){var d=mJ(a.C);c=d.De();a.D=new hec;a.Ma.listen(a.D,"refresh-db-object-request",a.pSa);d=new Sv(d.Fa.H,c?5:1);a.D.render();var e=a.D;e.O=d;e.L=c;tHf(a.D)}c=a.D}else c=2==c?dIf(a):eIf(a);else c=null;if(c){a=Ape(a.H,b);c.H=a;c.R=b;b=c.H&&"fetch-successful"==c.H.getType()?(b=c.H.C)?b.fw():null:null;b&&jec(c,b);b=vA.isEnabled();
switch(c.H.getType()){case "invalid-db-object":case "insufficient-access":c.setVisible(!0);Q(c.Ha("waffle-dbsource-pill-timestamp"),!1);Q(c.Ha("waffle-dbsource-pill-progress"),!1);Q(c.Ha("waffle-dbsource-pill-error"),!1);c.D.Pa(!1);c.D.setVisible(!1);c.C.setContent("\u00c4nderungen \u00fcbernehmen");c.C.setVisible(!0);c.F.setVisible(b);eN(c,!1);break;case "offline":c.setVisible(!0);Q(c.Ha("waffle-dbsource-pill-timestamp"),!1);Q(c.Ha("waffle-dbsource-pill-progress"),!1);Q(c.Ha("waffle-dbsource-pill-error"),
!1);c.D.Pa(!1);c.D.setVisible(!1);c.C.setContent("\u00c4nderungen \u00fcbernehmen");c.C.setVisible(!0);c.F.setVisible(!1);eN(c,!1);break;case "loading":c.setVisible(!0);Q(c.Ha("waffle-dbsource-pill-timestamp"),!1);Us(c.Ha("waffle-dbsource-pill-progress-message"),"Wird geladen\u2026");Q(c.Ha("waffle-dbsource-pill-progress"),!0);Q(c.Ha("waffle-dbsource-pill-error"),!1);c.D.Pa(!1);c.D.setVisible(!1);c.C.setVisible(!1);c.F.setVisible(!1);eN(c,!1);break;case "no-results":c.setVisible(!0);Q(c.Ha("waffle-dbsource-pill-timestamp"),
!1);Q(c.Ha("waffle-dbsource-pill-progress"),!1);Q(c.Ha("waffle-dbsource-pill-error"),!1);c.D.Pa(!1);c.D.setVisible(!1);c.C.setContent("\u00c4nderungen \u00fcbernehmen");c.C.setVisible(!0);c.F.setVisible(b);eN(c,!0);break;case "fetching-results":c.setVisible(!0);Q(c.Ha("waffle-dbsource-pill-timestamp"),!1);Us(c.Ha("waffle-dbsource-pill-progress-message"),"Wird aktualisiert\u2026");Q(c.Ha("waffle-dbsource-pill-progress"),!0);Q(c.Ha("waffle-dbsource-pill-error"),!1);c.D.Pa(!1);c.D.setVisible(!1);c.C.setVisible(!1);
c.F.setVisible(!1);eN(c,!1);break;case "fetch-successful":c.setVisible(!0);Q(c.Ha("waffle-dbsource-pill-timestamp"),!0);Q(c.Ha("waffle-dbsource-pill-progress"),!1);Q(c.Ha("waffle-dbsource-pill-error"),!1);c.D.Pa(!1);c.D.setVisible(!1);c.C.setContent("Aktualisieren");c.C.setVisible(!0);c.F.setVisible(b);eN(c,!0);break;case "fetch-failed":c.setVisible(!0);Q(c.Ha("waffle-dbsource-pill-timestamp"),!1);Q(c.Ha("waffle-dbsource-pill-progress"),!1);Q(c.Ha("waffle-dbsource-pill-error"),!0);c.D.Pa(!0);c.D.setVisible(!0);
c.C.setVisible(!1);c.F.setVisible(b);eN(c,!1);break;case "do-not-show":c.setVisible(!1)}c.C.Fb()&&(b=c.H&&"offline"==c.H.getType()?"Stellen Sie eine Internetverbindung her, um \u00c4nderungen an diesem Objekt vorzunehmen.":"",bw(c.C.Na(),b,void 0))}}else gIf(a)}function gIf(a){var b=dIf(a);b&&b.setVisible(!1);(a=eIf(a))&&a.setVisible(!1)}
p.pSa=function(){var a=cIf(this);if(a)switch(ritz_api.RitzModelApi.getDbObjectTypeForExternalDataSourceId(a)){case 1:Hib.Hb(a);break;case 5:Jib.Hb(a);break;case 3:Mib.Hb(a);break;case 2:Iib.Hb(a);break;case 4:ljb.Hb(a)}};p.Mvb=function(a){null!=a.C.find(function(b){var c=b.getId();b=b.getType();return!!c&&6==b&&null!=ritz_api.RitzModelApi.getExternalDataIdForObject(c)})&&fIf(this)};p.nUb=function(a){var b=mQ(this.F),c=mJ(this.C);c&&b&&3!=b.getSheetType()&&(a=a.xj)&&TM(a)&&(fIf(this),aQ(c))};
function dIf(a){a=mJ(a.C);return a?(a=yHf(a))?a.C:null:null}function eIf(a){a=mJ(a.C);return a?(a=xHf(a))?a.C:null:null}function cIf(a){return(a=mJ(a.C))?wHf(a):null};function hIf(a,b){this.D=a;this.C=b};function iIf(a){this.D=a;this.C={};this.F=new ti}
function jIf(a,b){b&&b.forEach(function(c){if(a.C[c]){var d=(new Date).getTime()-a.C[c].D,e=E5b(c),f;if(f=e)f=e.getState(),f=2==f||3==f;if(f){if(2==e.getState()){e=new wh;O(e,1,1E3*d);f=a.C[c].C;var h=a.F.Uc(tg.Aa(),ritz_api.RitzModelApi.getExternalData(c));d=new lKd;O(d,2,f);a:switch(f){case 3:var k=H(h,6).getFormat();k=De(k,1)+De(k,2)+De(k,3);break a;default:k=De(H(h,7),1)}O(d,5,k);a:switch(f){case 3:f=H(h,6);f=De(f,3);break a;default:f=De(H(h,7),2)}O(d,4,f);f=new Bh;Ug(f,16,d);e=tv(a2a(qv(new pv,
41),e),f);a.D.C(36294,e.build())}delete a.C[c]}}})};function kIf(a,b){eJ.call(this,139);this.C=a||"";this.D=b}x(kIf,eJ);kIf.prototype.Nd=function(){var a=new UGb;I(a,1,this.C);I(a,2,this.D);return a};kIf.prototype.XN=function(){return WGb.Aa()};function lIf(a,b,c,d,e,f,h,k,l,m,r,t){iZ.call(this,a,b,d,f,h,k,l);this.Qa=new ZHf(b,this.L,l,r,f,c,m);this.va(this.Qa);this.Ma=new Dl(this);this.va(this.Ma);mIf()&&(this.Ua=new aIf(a,b,c,d),this.va(this.Ua));this.F=null;this.R=c;this.eb=l;this.Za=m;this.gb=a.D.C;this.Ka=new ti;this.$a=t;this.D=null;this.Oa=new iIf(this.eb);a=dG(this.L.C);this.Ma.listen(d,"J",this.bUb).listen(a,"yb",this.YTb).listen(a,"hb",this.XTb).listen(this.H,"Z",this.$Tb).listen(this.H,"$",this.aUb).listen(this.L,"db-execution-status-updated",
this.WTb).listen(a,"ub",this.ZTb).listen(this.R,"valueChange",this.tda).listen(this.R,"refresh-db-object-request",this.mSa).listen(this.L,"external_data_change",this.bvb)}x(lIf,iZ);p=lIf.prototype;p.La=function(){iZ.prototype.La.call(this);F(this.F);F(this.D)};p.WBa=function(a){a.C(ijb,yS).F(ijb,yS).C(kjb,yS).C(mjb,yS).F(mjb,yS).C(hjb,yS).F(hjb,yS).C(ljb,yS).C(Uib,yS).C(njb,yS).C(ojb,yS).C(vA,yS);C(B(),"fedr")&&a.C(Jib,yS);C(B(),"fedbc")&&a.C(Iib,yS);C(B(),"fedf")&&a.C(Mib,yS)};
p.KZa=function(){var a=this;this.V.subscribe(kjb,"action",this.Da).subscribe(ijb,"action",this.Orb).subscribe(hjb,"action",this.EJb).subscribe(mjb,"action",this.z7b).subscribe(ljb,"action",function(b){return nIf(a,1,b)}).subscribe(Iib,"action",function(b){return nIf(a,2,b)}).subscribe(Jib,"action",function(b){return nIf(a,5,b)}).subscribe(Hib,"action",function(b){return nIf(a,3,b)}).subscribe(Mib,"action",function(b){return nIf(a,4,b)}).subscribe(Uib,"action",this.eHb).subscribe(njb,"action",this.Uwa).subscribe(ojb,
"action",this.VYa)};function oIf(a,b){var c=new Jdc(b);a.D?a.D.refresh(c):a.F&&a.F.C.refresh(c);b&&(c=ritz_api.RitzModelApi.canGenerateQuery(b),b=ritz_api.RitzModelApi.getDbObjectTypeForExternalDataSourceId(b),a.D&&4==b?eN(a.D,c):a.F&&eN(a.F.C,c))}p.WTb=function(a){pIf(this,a.D);jIf(this.Oa,a.D)};function pIf(a,b){var c=qIf(a);b.find(function(d){return d==c})&&oIf(a,c)}p.$Tb=function(){this.tda()};p.YTb=function(){if(!mIf()){var a=mJ(this.R);a&&nJ(this.R)&&aQ(a)}};
p.aUb=function(){mIf()||(F(this.F),this.F=null)};p.ZTb=function(){this.tda()};p.XTb=function(){this.tda()};p.bUb=function(){mIf()||this.D&&tHf(this.D)};
p.tda=function(){if(!mIf()){var a=mQ(this.H);if(a&&this.R.C())switch(a.getSheetType()){case 0:this.D&&(F(this.D),this.D=null);a=rIf(this);!a||1!=ritz_api.RitzModelApi.getDbObjectTypeForExternalDataSourceId(a)&&5!=ritz_api.RitzModelApi.getDbObjectTypeForExternalDataSourceId(a)?this.F&&this.F.setVisible(!1):(this.F||(this.F=xHf(mJ(this.R)),sIf(this)),a=rIf(this),oIf(this,a),this.F.setVisible(!0));break;case 3:if(this.F&&this.F.setVisible(!1),(a=mQ(this.H))&&TF(a)){if(!this.D){var b=mJ(this.R);a=b.De();
this.D=new hec;this.Ma.listen(this.D,"refresh-db-object-request",this.mSa);b=new Sv(b.Fa.H,a?5:1);this.D.render();var c=this.D;c.O=b;c.L=a;tHf(this.D);tIf(this)}a=uIf(this);oIf(this,a)}}}};function uIf(a){return ritz_api.RitzModelApi.getExternalDataIdForDatasourceSheet(mQ(a.H).Cb())}p.bvb=function(){sIf(this);tIf(this)};function sIf(a){var b=rIf(a);a.F&&b&&vIf(a,b,function(c){var d;if(d=a.F)eec(a.F.C.F,c),d=void 0;return d},function(c){var d;if(d=a.F)fec(a.F.C.F,c),d=void 0;return d})}
function tIf(a){var b=uIf(a);a.D&&b&&vIf(a,b,function(c){var d;if(d=a.D)eec(a.D.F,c),d=void 0;return d},function(c){var d;if(d=a.D)fec(a.D.F,c),d=void 0;return d})}function vIf(a,b,c,d){vA.isEnabled()&&ritz_api.RitzModelApi.canGenerateQuery(b)&&Cdc(a.$a,b,c,d)}function qIf(a){return uIf(a)||rIf(a)}
function rIf(a){if(!pJ(a.L.C))return null;var b=rI(QK(a.L.C)),c=b.getExternalDataCellSummaries(!0);0==c.length&&(b=b.wN())&&(c=new Ij(b.getColumnIndex(),b.Yl()),c=JH(QK(a.L.C),c).getExternalDataCellSummaries(!0));return 0<c.length?c[0].getDataSourceId():null}p.EJb=function(a){wIf(this,a.ol(),a.C)};
p.z7b=function(a){var b=this,c=ritz_api.RitzModelApi.getDatasourceSlotDeltaProto(a),d=this.Ka.Uc(Rn.Aa(),c),e=new $Y(GK.getInstance());this.O.addCallback(function(f){Owe(e).then(function(h){h=f.bHa(a,d,h);b.va(h);aZ(b.C,h)},ca())})};
p.VYa=function(a){var b=this;this.O.addCallback(function(c){var d=a.H;if(d){var e=d.C;if(Ce(H(e,3),4)){var f=H(d.C,3);e=H(f,5);var h=new Rn;I(h,2,2);var k=new Sn;f=H(f,4);var l=f.ai()||"";f=l+(l?".":"")+H(f,2)+"."+f.getName();I(k,1,"select * from `"+f+"`");I(k,5,e);I(h,3,k);e=h}c=c.bHa(d.ol(),e,a.C)}else c=c.gib(a);b.va(c);aZ(b.C,c)})};p.Orb=function(a){wIf(this,null,a.C)};
function wIf(a,b,c){b=new kIf(b,c);fJ(b,function(d,e){if(d){d=e.ol();e=ritz_api.RitzModelApi.generateExternalDataIdForDatasourceSheet(d);var f=ritz_api.RitzModelApi.createRefreshObjectRequestForDatasourceSheetInitialLoad(e,d);xIf(a,f,1,e);e=a.L.Fa;e.C.delete(d);SK(e,d)}});a.Za.C(b);Qwe(a.C)}p.mSa=function(){if(!mIf()){var a=qIf(this);if(a)switch(ritz_api.RitzModelApi.getDbObjectTypeForExternalDataSourceId(a)){case 1:Hib.Hb(a);break;case 5:Jib.Hb(a);break;case 4:ljb.Hb(a)}}};
p.Uwa=function(a){var b=this,c=new EHf(a);this.va(c);aZ(this.C,c);c.getResult().then(function(d){b.VYa(d)},function(){F(c)})};p.KLa=function(){oye("Verbindung zu BigQuery konnte nicht hergestellt werden")};function nIf(a,b,c){xIf(a,ritz_api.RitzModelApi.createRefreshObjectRequest(c),b,c)}function xIf(a,b,c,d){b=a.Ka.Uc(O4b.Aa(),b);var e=(new Date).getTime();sHf(GK.getInstance(),b,a.gb).then(function(f){f.El().Cq()||(a.Oa.C[d]=new hIf(e,c));return f},ca())}
p.eHb=function(a){if(a){var b=ritz_api.RitzModelApi.getDbObjectTypeForExternalDataSourceId(a.D);a=BHf(b,a.C);bJ(a.body,a.title)}};function mIf(){return C(B(),"fedoc")};function yIf(){E.call(this)}x(yIf,TI);yIf.prototype.C=function(){return lIf};ZI("dbsource",yIf);
